# 신용카드 결제 서비스

### 필수 요구사항

* 결제 API<br>
카드 정보와 금액정보를 입력받아서 카드사와 협의된 String 데이터로 DB에 저장
    * Request
    ```
  Required
  - 카드번호 (10~16자리 숫자)
  - 유효기간 (4자리 숫자, mmyy) 
  - cvs (3자리 숫자)
  - 할부개월수 : 0 (일시불), 1~12
  - 결제금액 (100원 이상, 10억원 이하, 숫자)
  Optinal
  - 부가가치세
    ```
  * Response
  ```
  Required
  - 관리번호(unique id, 20자리)
  Optional
  - 추가로 내려주면 좋을 데이터
  ```
  *기본적은 request에 대한 validate 필요*
* 결제취소 API<br>
    결제에 대한 전체취소는 1번만 가능,<br>
    부가가치세 정보를 넘기지 않을 경우, 결제 데이터의 부가가치세 금액으로 취소,<br>
    할부개월수 데이터는 00(일시불)로 저장
    * Request
  ```
  Required
  - 관리번호 (unique id ,20자리)
  - 취소금액
  Optional
  - 부가가치세
  ```
  * Reponse
  ```
  Required
  - 관리번호 (unique id, 20자리)
  Optional
  - 추가로 내려주면 좋을 데이터
  ```
  *기본적인 validate 필요*
* 데이터 조회 API<br>
DB에 저장된 데이터를 조회해서 응답값을 만들어줍니다.
    * Request
  ```
  Request
  - 관리번호 (unique id)
  ```
  * Response
  ```
  Required
  - 카드 정보 ( 암호화된 데이터를 복호화해서 데이터로 제공 )
    * 카드번호 : 앞6자리와 뒤3자리를 제외한 나머지를 마스킹처리
    * 유효기간
    * cvc
  - 결제/취소 구분
  - 금액정보
    * 결제/취소 금액
    * 부가가치세
  Optional
  - 추가로 내려주면 좋을 데이터
  ```
* API 요청 실패시<br>
    자유롭게 정의한 에러응답, 에러코드를 내려줌.
<br>
<br>
### 선택 요구사항
* 부분 취소 API를 구현
    * 정책
        * 결제 한 건에 대해서 모두 취소가 될때까지 부분 금액으로 계속 취소 할 수 있다.
        * 부가가치세 검증 로직 : 겔제금액의 부가가치세 = 모든 부분취소 부가가치세의 합
<br>
<br>     
* Multi Thread 환경에 대비해주세요.
    * 제약 조건
        * 결제 : 하나의 카드로 동시에 결제를 할 수 없다.
        * 전체취소 : 결제 한건에 대한 전체취소를 동시에 할 수 없다.
        * 부분취소 : 결제 한건에 대한 부분 취소를 동시에 할 수 없다.

*Job History를 관리함으로써 구현하려고 함.*